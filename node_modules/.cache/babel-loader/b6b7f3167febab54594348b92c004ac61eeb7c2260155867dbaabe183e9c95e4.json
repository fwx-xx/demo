{"ast":null,"code":"import _Message2 from \"element-ui/lib/theme-chalk/message.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Message from \"element-ui/lib/message\";\nimport \"core-js/modules/es.array.push.js\";\nimport { reqUserInfo, reqLogout } from '@/api';\nimport { deleteToken } from '@/utils/auth';\nimport router from '@/router';\nexport default {\n  namespaced: true,\n  // actions中存的是：用于响应组件中“动作”的函数 —— 服务员\n  actions: {\n    // 专门用于获取用户信息的\n    async getUserInfo({\n      commit\n    }) {\n      // 发请求\n      const {\n        code,\n        message,\n        data\n      } = await reqUserInfo();\n      // 判断业务逻辑\n      if (code === 200) {\n        commit('SAVE_USER_INFO', data);\n      } else {\n        _Message.error(`获取用户信息失败：${message}`);\n        return Promise.reject();\n      }\n    },\n    // 专门用于退出登录\n    async logout({\n      commit\n    }, value) {\n      // 联系服务器，删除token，成功了\n      const {\n        code,\n        message\n      } = await reqLogout();\n      if (code === 200) {\n        // 提示\n        value ? _Message.warning(value) : _Message.success('退出登录成功！');\n        // 删除vuex中的数据\n        commit('CLEAR_USER_INFO');\n        // 删除本地的token\n        deleteToken();\n        // 跳转路由到/login\n        router.push('/login');\n      } else {\n        _Message.error(`退出登录失败：${message}`);\n      }\n    }\n  },\n  // mutations中存的是：用于修改数据的函数 —— 厨师\n  mutations: {\n    // 保存用户信息\n    SAVE_USER_INFO(state, value) {\n      state.info = value;\n    },\n    // 清除用户信息\n    CLEAR_USER_INFO(state) {\n      state.info = {};\n    }\n  },\n  // state中配置的是初始化的数据 —— 原材料\n  state: {\n    info: {}\n  }\n};","map":{"version":3,"names":["reqUserInfo","reqLogout","deleteToken","router","namespaced","actions","getUserInfo","commit","code","message","data","_Message","error","Promise","reject","logout","value","warning","success","push","mutations","SAVE_USER_INFO","state","info","CLEAR_USER_INFO"],"sources":["/Users/fuweixiang/Desktop/前端/git/demo/src/store/modules/user.js"],"sourcesContent":["import {reqUserInfo,reqLogout} from '@/api'\r\nimport {Message} from 'element-ui'\r\nimport {deleteToken} from '@/utils/auth'\r\nimport router from '@/router'\r\n\r\nexport default {\r\n  namespaced:true,\r\n  // actions中存的是：用于响应组件中“动作”的函数 —— 服务员\r\n  actions:{\r\n    // 专门用于获取用户信息的\r\n    async getUserInfo({commit}){\r\n      // 发请求\r\n      const {code,message,data} = await reqUserInfo()\r\n      // 判断业务逻辑\r\n      if(code === 200){\r\n        commit('SAVE_USER_INFO',data)\r\n      }else{\r\n        Message.error(`获取用户信息失败：${message}`)\r\n        return Promise.reject()\r\n      }\r\n    },\r\n    // 专门用于退出登录\r\n    async logout({commit},value){\r\n      // 联系服务器，删除token，成功了\r\n      const {code,message} = await reqLogout()\r\n      if(code === 200){\r\n        // 提示\r\n        value ? Message.warning(value) : Message.success('退出登录成功！')\r\n        // 删除vuex中的数据\r\n        commit('CLEAR_USER_INFO')\r\n        // 删除本地的token\r\n        deleteToken()\r\n        // 跳转路由到/login\r\n        router.push('/login')\r\n      }else{\r\n        Message.error(`退出登录失败：${message}`)\r\n      }\r\n    }\r\n  },\r\n\r\n  // mutations中存的是：用于修改数据的函数 —— 厨师\r\n  mutations:{\r\n    // 保存用户信息\r\n    SAVE_USER_INFO(state,value){\r\n      state.info = value\r\n    },\r\n    // 清除用户信息\r\n    CLEAR_USER_INFO(state){\r\n      state.info = {}\r\n    }\r\n  },\r\n\r\n  // state中配置的是初始化的数据 —— 原材料\r\n  state:{\r\n    info:{}\r\n  }\r\n}"],"mappings":";;;;AAAA,SAAQA,WAAW,EAACC,SAAS,QAAO,OAAO;AAE3C,SAAQC,WAAW,QAAO,cAAc;AACxC,OAAOC,MAAM,MAAM,UAAU;AAE7B,eAAe;EACbC,UAAU,EAAC,IAAI;EACf;EACAC,OAAO,EAAC;IACN;IACA,MAAMC,WAAWA,CAAC;MAACC;IAAM,CAAC,EAAC;MACzB;MACA,MAAM;QAACC,IAAI;QAACC,OAAO;QAACC;MAAI,CAAC,GAAG,MAAMV,WAAW,CAAC,CAAC;MAC/C;MACA,IAAGQ,IAAI,KAAK,GAAG,EAAC;QACdD,MAAM,CAAC,gBAAgB,EAACG,IAAI,CAAC;MAC/B,CAAC,MAAI;QACHC,QAAA,CAAQC,KAAK,CAAE,YAAWH,OAAQ,EAAC,CAAC;QACpC,OAAOI,OAAO,CAACC,MAAM,CAAC,CAAC;MACzB;IACF,CAAC;IACD;IACA,MAAMC,MAAMA,CAAC;MAACR;IAAM,CAAC,EAACS,KAAK,EAAC;MAC1B;MACA,MAAM;QAACR,IAAI;QAACC;MAAO,CAAC,GAAG,MAAMR,SAAS,CAAC,CAAC;MACxC,IAAGO,IAAI,KAAK,GAAG,EAAC;QACd;QACAQ,KAAK,GAAGL,QAAA,CAAQM,OAAO,CAACD,KAAK,CAAC,GAAGL,QAAA,CAAQO,OAAO,CAAC,SAAS,CAAC;QAC3D;QACAX,MAAM,CAAC,iBAAiB,CAAC;QACzB;QACAL,WAAW,CAAC,CAAC;QACb;QACAC,MAAM,CAACgB,IAAI,CAAC,QAAQ,CAAC;MACvB,CAAC,MAAI;QACHR,QAAA,CAAQC,KAAK,CAAE,UAASH,OAAQ,EAAC,CAAC;MACpC;IACF;EACF,CAAC;EAED;EACAW,SAAS,EAAC;IACR;IACAC,cAAcA,CAACC,KAAK,EAACN,KAAK,EAAC;MACzBM,KAAK,CAACC,IAAI,GAAGP,KAAK;IACpB,CAAC;IACD;IACAQ,eAAeA,CAACF,KAAK,EAAC;MACpBA,KAAK,CAACC,IAAI,GAAG,CAAC,CAAC;IACjB;EACF,CAAC;EAED;EACAD,KAAK,EAAC;IACJC,IAAI,EAAC,CAAC;EACR;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}