{"ast":null,"code":"import { mapState } from 'vuex';\nexport default {\n  name: \"Header\",\n  data() {\n    return {\n      keyword: ''\n    };\n  },\n  computed: {\n    ...mapState('user', ['info'])\n  },\n  methods: {\n    // 点击搜索按钮，携带关键词跳转到搜索路由\n    toSearch() {\n      // 获取当前路由中的所有参数\n      const {\n        query\n      } = this.$route;\n      // 跳转路由\n      this.$router.replace({\n        path: '/search',\n        query: {\n          /* \r\n            undefined的作用在于：如果用户不输入关键词，那么就把值设置为undefined。\r\n            路由不会把undefined呈现到路径中，也不会呈现到页面上，但通过js代码，是依然可以获取到的。\r\n          */\n          ...query,\n          //携带之前的所有参数\n          keyword: this.keyword || undefined\n        }\n      });\n    },\n    // 用于清空关键词\n    clearKeyword() {\n      // 清空关键词\n      this.keyword = '';\n    },\n    // 用于退出登录\n    logout() {\n      if (confirm('确认退出登录吗？')) {\n        this.$store.dispatch('user/logout');\n      }\n    }\n  },\n  created() {\n    // 给总线绑事件\n    this.$bus.$on('clear-keyword', this.clearKeyword);\n  },\n  beforeDestroy() {\n    // 解绑总线事件\n    this.$bus.$off('clear-keyword');\n  }\n};","map":{"version":3,"names":["mapState","name","data","keyword","computed","methods","toSearch","query","$route","$router","replace","path","undefined","clearKeyword","logout","confirm","$store","dispatch","created","$bus","$on","beforeDestroy","$off"],"sources":["src/components/Header/index.vue"],"sourcesContent":["<template>\r\n  <header class=\"header\">\r\n    <!-- 头部的第一行 -->\r\n    <div class=\"top\">\r\n      <div class=\"container\">\r\n        <div class=\"loginList\">\r\n          <p>尚品汇欢迎您！hahahhaha</p>\r\n          <p v-if=\"!info.id\">\r\n            <span>请</span>\r\n            <router-link to=\"/login\">登录</router-link>\r\n            <router-link to=\"/register\" class=\"register\">注册</router-link>\r\n          </p>\r\n          <p v-if=\"info.id\">\r\n            <span>欢迎，{{info.name}}</span>\r\n            <a class=\"register\" @click=\"logout\">退出登录</a>\r\n          </p>\r\n          <div></div>\r\n        </div>\r\n        <div class=\"typeList\">\r\n          <router-link to=\"/myorder\">我的订单</router-link>\r\n          <router-link to=\"/shopcart\">我的购物车</router-link>\r\n          <a href=\"###\">我的尚品汇</a>\r\n          <a href=\"###\">尚品汇会员</a>\r\n          <a href=\"###\">企业采购</a>\r\n          <a href=\"###\">关注尚品汇</a>\r\n          <a href=\"###\">合作招商</a>\r\n          <a href=\"###\">商家后台</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--头部第二行 搜索区域-->\r\n    <div class=\"bottom\">\r\n      <h1 class=\"logoArea\">\r\n        <router-link class=\"logo\" title=\"尚品汇\" to=\"/home\">\r\n          <img src=\"./images/logo.png\" alt=\"\" />\r\n        </router-link>\r\n      </h1>\r\n      <div class=\"searchArea\">\r\n        <form class=\"searchForm\" @submit.prevent=\"toSearch\">\r\n          <input\r\n            type=\"text\"\r\n            id=\"autocomplete\"\r\n            class=\"input-error input-xxlarge\"\r\n            v-model=\"keyword\"\r\n          />\r\n          <button class=\"sui-btn btn-xlarge btn-danger\" type=\"submit\">\r\n            搜索\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </header>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\n  export default {\r\n    name: \"Header\",\r\n    data() {\r\n      return {\r\n        keyword:''\r\n      }\r\n    },\r\n    computed:{\r\n      ...mapState('user',['info'])\r\n    },\r\n    methods: {\r\n      // 点击搜索按钮，携带关键词跳转到搜索路由\r\n      toSearch(){\r\n        // 获取当前路由中的所有参数\r\n        const {query} = this.$route\r\n        // 跳转路由\r\n        this.$router.replace({\r\n          path:'/search',\r\n          query:{\r\n            /* \r\n              undefined的作用在于：如果用户不输入关键词，那么就把值设置为undefined。\r\n              路由不会把undefined呈现到路径中，也不会呈现到页面上，但通过js代码，是依然可以获取到的。\r\n            */\r\n            ...query, //携带之前的所有参数\r\n            keyword:this.keyword || undefined,\r\n          }\r\n        })\r\n      },\r\n      // 用于清空关键词\r\n      clearKeyword(){\r\n        // 清空关键词\r\n        this.keyword = ''\r\n      },\r\n      // 用于退出登录\r\n      logout(){\r\n        if(confirm('确认退出登录吗？')){\r\n          this.$store.dispatch('user/logout')\r\n        }\r\n      }\r\n    },\r\n    created(){\r\n      // 给总线绑事件\r\n      this.$bus.$on('clear-keyword',this.clearKeyword)\r\n    },\r\n    beforeDestroy() {\r\n      // 解绑总线事件\r\n      this.$bus.$off('clear-keyword')\r\n    },\r\n  };\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.header {\r\n  & > .top {\r\n    background-color: #eaeaea;\r\n    height: 30px;\r\n    line-height: 30px;\r\n\r\n    .container {\r\n      width: 1200px;\r\n      margin: 0 auto;\r\n      overflow: hidden;\r\n\r\n      .loginList {\r\n        float: left;\r\n\r\n        p {\r\n          float: left;\r\n          margin-right: 10px;\r\n\r\n          .register {\r\n            border-left: 1px solid #b3aeae;\r\n            padding: 0 5px;\r\n            margin-left: 5px;\r\n          }\r\n        }\r\n      }\r\n\r\n      .typeList {\r\n        float: right;\r\n\r\n        a {\r\n          padding: 0 10px;\r\n\r\n          & + a {\r\n            border-left: 1px solid #b3aeae;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  & > .bottom {\r\n    width: 1200px;\r\n    margin: 0 auto;\r\n    overflow: hidden;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding-bottom: px;\r\n\r\n    .logoArea {\r\n      float: left;\r\n\r\n      .logo {\r\n        img {\r\n          width: 135px;\r\n          margin: 14px 28px 10px 15px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .searchArea {\r\n      float: right;\r\n\r\n      .searchForm {\r\n        overflow: hidden;\r\n\r\n        input {\r\n          box-sizing: border-box;\r\n          width: 490px;\r\n          height: 32px;\r\n          padding: 0px 4px;\r\n          border: 2px solid #ea4a36;\r\n          float: left;\r\n\r\n          &:focus {\r\n            outline: none;\r\n          }\r\n        }\r\n\r\n        button {\r\n          height: 32px;\r\n          width: 68px;\r\n          background-color: #ea4a36;\r\n          border: none;\r\n          color: #fff;\r\n          float: left;\r\n          cursor: pointer;\r\n\r\n          &:focus {\r\n            outline: none;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"],"mappings":"AAuDA,SAAAA,QAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAJ,QAAA;EACA;EACAK,OAAA;IACA;IACAC,SAAA;MACA;MACA;QAAAC;MAAA,SAAAC,MAAA;MACA;MACA,KAAAC,OAAA,CAAAC,OAAA;QACAC,IAAA;QACAJ,KAAA;UACA;AACA;AACA;AACA;UACA,GAAAA,KAAA;UAAA;UACAJ,OAAA,OAAAA,OAAA,IAAAS;QACA;MACA;IACA;IACA;IACAC,aAAA;MACA;MACA,KAAAV,OAAA;IACA;IACA;IACAW,OAAA;MACA,IAAAC,OAAA;QACA,KAAAC,MAAA,CAAAC,QAAA;MACA;IACA;EACA;EACAC,QAAA;IACA;IACA,KAAAC,IAAA,CAAAC,GAAA,uBAAAP,YAAA;EACA;EACAQ,cAAA;IACA;IACA,KAAAF,IAAA,CAAAG,IAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}